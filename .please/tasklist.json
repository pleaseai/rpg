{
  "feature": "Implement DependencyGraph with invocation and inheritance tracking",
  "issue_number": 80,
  "plan_path": ".please/plans/2026-02-15-dependency-graph.md",
  "spec": null,
  "stage": 2,
  "pr_number": 83,
  "created_at": "2026-02-15T00:00:00.000Z",
  "updated_at": "2026-02-15T00:00:00.000Z",
  "tasks": [
    {
      "id": "T001",
      "title": "Extend DependencyEdge with new dependency types",
      "phase": 1,
      "status": "pending",
      "parallel": true,
      "dependencies": [],
      "files_affected": [
        "packages/graph/src/edge.ts"
      ]
    },
    {
      "id": "T002",
      "title": "Design and create DependencyGraph class",
      "phase": 1,
      "status": "pending",
      "parallel": false,
      "dependencies": [
        "T001"
      ],
      "files_affected": [
        "packages/encoder/src/dependency-graph.ts"
      ]
    },
    {
      "id": "T003",
      "title": "Implement invocation tracking via tree-sitter queries",
      "phase": 2,
      "status": "pending",
      "parallel": false,
      "dependencies": ["T001", "T002"],
      "files_affected": [
        "packages/encoder/src/dependency-graph.ts"
      ]
    },
    {
      "id": "T004",
      "title": "Implement inheritance tracking via tree-sitter queries",
      "phase": 2,
      "status": "pending",
      "parallel": false,
      "dependencies": ["T001", "T002"],
      "files_affected": [
        "packages/encoder/src/dependency-graph.ts"
      ]
    },
    {
      "id": "T005",
      "title": "Add tree-sitter queries for all supported languages",
      "phase": 3,
      "status": "pending",
      "parallel": false,
      "dependencies": ["T003", "T004"],
      "files_affected": [
        "packages/utils/src/ast/parser.ts",
        "packages/utils/src/ast/languages/"
      ]
    },
    {
      "id": "T006",
      "title": "Implement symbol resolution with cross-file inference",
      "phase": 3,
      "status": "pending",
      "parallel": false,
      "dependencies": ["T003"],
      "files_affected": [
        "packages/encoder/src/symbol-resolver.ts"
      ]
    },
    {
      "id": "T007",
      "title": "Integrate with RPGEncoder.injectDependencies()",
      "phase": 4,
      "status": "pending",
      "parallel": false,
      "dependencies": ["T002", "T005", "T006"],
      "files_affected": [
        "packages/encoder/src/encoder.ts"
      ]
    }
  ],
  "verification": {
    "automated_tests": [
      "Unit tests pass: bun run test tests/dependency-graph.test.ts",
      "Unit tests pass: bun run test tests/symbol-resolver.test.ts",
      "Integration tests pass: bun run test tests/encoder.test.ts",
      "All tests pass: bun run test",
      "Type checking: bun run typecheck",
      "Linting: bun run lint"
    ],
    "manual_tests": [],
    "acceptance_criteria": [
      "AC-1: DependencyEdge supports call, inherit, implement, use dependency types",
      "AC-2: Function/method calls extracted via tree-sitter for all 6 languages",
      "AC-3: Class hierarchy (extends/implements) extracted for all applicable languages",
      "AC-4: Cross-file symbol resolution resolves call targets using import graph",
      "AC-5: Existing import edges still work (no compatibility shims needed)",
      "AC-6: RPGEncoder.injectDependencies() produces richer dependency graph"
    ]
  }
}
